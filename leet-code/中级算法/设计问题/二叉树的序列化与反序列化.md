# [二叉树的序列化与反序列化](https://leetcode-cn.com/leetbook/read/top-interview-questions-medium/xwxa3m/)

### algorithm:
- 前序遍历二叉树
- 使用map记录，key为index，value为val
- 对于index为i的节点，子节点index分别为2i和2i+1
- 序列化map

### code:
```javascript
var serialize = function(root) {
    const map = new Map()
    const traverse = (node, index) => {
        if (!node) {
            return
        }
        map.set(index, node.val)
        traverse(node.left, index * 2 + 1)
        traverse(node.right, index * 2 + 2)
    }
    traverse(root, 0)
    return Array.from(map.entries()).map(entry => entry.join('$')).join(';')
};
var deserialize = function(data) {
    if (!data) {
        return null
    }
    const map = new Map(data.split(';').map(kv => kv.split('$')))
    const build = index => {
        const val = map.get('' + index)
        if (val != null) {
            const node = new TreeNode(val)
            node.left = build(index * 2 + 1)
            node.right = build(index * 2 + 2)
            return node
        } else {
            return null
        }
    }
    return build(0)
}
```
